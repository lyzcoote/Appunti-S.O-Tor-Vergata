# 1.7 Struttura di un sistema operativo

Esistono sei strutture per quanto riguarda i sistemi operativi:
**`Sistemi Monolitici`, `Sistemi a livelli/strati`, `Microkernel`, `Sistemi Client-Server`, `Macchine Virtuali`** e **`Exokernel`**

# 1.7.1 Sistemi Monolitici

>***DEF:*** Un sistema operativo monolitico è un’architettura del sistema operativo in cui l’intero sistema operativo funziona nello spazio del kernel. 

Esistono tre livelli principali nei sistemi operativi monolitici: 
**`Livello applicazione`**, **`Kernel monolitico`** e **`Livello hardware`**.


In questi sistemi operativi, ogni applicazione ha il proprio spazio di indirizzi. Pertanto, le applicazioni sono più sicure. Il kernel gestisce i servizi del sistema operativo, che includono il file system , lo scheduler della CPU e il gestore della memoria.


Le applicazioni richiedono servizi dal kernel tramite chiamate di sistema. Quando un’applicazione richiede un servizio, lo spazio degli indirizzi hardware dell’applicazione passa allo spazio degli indirizzi hardware del sistema operativo per eseguirlo. I sistemi operativi monolitici gestiscono un’interfaccia virtuale di alto livello sull’hardware del computer. Inoltre, in questo, è possibile aggiungere driver di dispositivo al kernel come moduli.

Un esempio di sistema che usa il Kernel Monolitoco è **Linux**


&nbsp;
&nbsp;
&nbsp;


# 1.7.2 Sistemi a livelli/strati


Al contrario,

>***DEF:*** Un sistema operativo a più livelli è un’architettura del sistema operativo divisa in un numero di livelli, ciascuno dei quali esegue una funzionalità specifica.

Lo scopo dello sviluppo di sistemi operativi a più livelli è evitare i limiti dei sistemi operativi monolitici.

Nei sistemi operativi a più livelli, tutti i livelli esistono separatamente e la modifica in un livello non influisce sugli altri livelli. Pertanto, è anche più facile creare, mantenere e aggiornare i sistemi operativi a più livelli. Inoltre, il livello più basso gestisce le operazioni relative all’hardware mentre il livello più alto gestisce le applicazioni utente.

Ci sono sei livelli principali nei sistemi operativi a più livelli: 


    Hardware

Questo è il livello più basso nell’architettura del sistema operativo. 
Questo livello gestisce i dispositivi hardware.


    Livello CPU

 
Gestisce le attività di pianificazione e pianifica i processi per la CPU. 

    Gestione della memoria

gestisce la memoria. Sposta i processi dal disco alla memoria primaria per l’esecuzione e invia i processi eseguiti al disco.

    Gestione dei processi: 

Gestisce i processi. 
Questo livello assegna la CPU per eseguire i processi.

    Buffer IO

Consente agli utenti di interagire con il sistema e gestisce i buffer per i dispositivi IO, assicurando che i dispositivi IO funzionino correttamente.

    Programmi utente

Il livello più alto nel sistema operativo a più livelli e gestisce i programmi utente come elaboratori di testi, browser ecc.

&nbsp;
&nbsp;
&nbsp;


# 1.7.3 Microkernel


&nbsp;
&nbsp;
&nbsp;

>***DEF:*** Un microkernel in un Sistema Operativo è un software o anche un codice che contiene la quantità quasi minima di funzioni e caratteristiche necessarie per implementare un sistema operativo.

Questa scelta di implementare una quantità quasi minima di funzioni e numero minimo di meccanismi, nasce dall'idea di differire da un sistema a livelli/strati.

Tradizionalmente, tutti gli strati andavano nel kernel, ma ciò non è necessario. In realtà, si può fare un grande sforzo per collocare il meno possibile in modalità kernel, dato che errori del kernel possono far cadere immediatamente il sistema.

Quindi l'idea alla base del progetto del microkernel è di raggiungere un'alta stabilità suddi- videndo il sistema operativo in piccoli moduli ben defniti, uno solo dei quali (microkernel) verrà eseguito in modalità kernel e il resto come uno dei più normali processi utente relativamente deboli. 


In particolare, facendo girare ogni driver di dispositivo e file system come processo utente separato

Esempio: Un driver audio potrà far sì che il suono sia storpiatoo non si senta bene, ma non bloccherà il computer, mentre in un kernel monolitico può causare un crash/blocco totale.

&nbsp;
&nbsp;
&nbsp;


![alt text](https://i.imgur.com/AzHIM7q.png)

&nbsp;
&nbsp;
&nbsp;

Un esempio di Microkernel sono: QNX, MINIX3 e POSIX.

## *Piccole Note*

    Strato Server

Lo strato Server compie la maggior parte del lavoro del sistema operativo. 
Uno o più server gestiscono il file system, creano il gestore del processo, cancellano e gestiscono processi e così via. 

Vengono inviati brevi messaggi ai server, richiedendo le chiamate di sistema POSIX.

&nbsp;
&nbsp;
&nbsp;

    Reincarnation Server

Questo server ha il compito è di verificare se gli altri server e driver stanno funzionando correttamente. Nel caso che ne riscontri uno mal funzionante, viene immediatamente sostituito senza alcuna interruzione per l’utente. In questo modo il sistema si fa automanutenzione e può raggiungere una stabilità notevole.


&nbsp;
&nbsp;
&nbsp;

# 1.7.4 Client-Server

Una leggera variazione rispetto all’idea del microkernel è distinguere due classi di processi, i server, ognuno dei quali mette a disposizione alcuni servizi, e i client, che li utilizzano. 

Questo modello è conosciuto come modello client-server. Speso il livello più basso è un microkernel, ma non è necessario. L’aspetto principale è la presenza di processi client e processi server.

La comunicazione fra client e server avviene spesso con un passaggio di messaggi. 

Per ottenere un servizio, un processo client costruisce un messaggio indicando la propria richiesta e lo invia al servizio appropriato. Il servizio quindi esegue il lavoro e rimanda indietro la risposta. Se client e server sono eseguiti sulla stessa macchina sono possibili alcune ottimizzazioni, ma concettualmente si tratta del passaggio di un messaggio.

Questo modello client-server offre un’astrazione utilizzabile per una macchina singola o per una rete di macchine, dato che al client non fa differenza se il server è locale o in rete.

![alt text](https://i.imgur.com/Hg8OYvm.png)

Molti sistemi coinvolgono come client sempre di più utenti con il loro PC a casa e come server grosse macchine in luoghi stabiliti.

In effetti, il Web funziona in questo modo. Un PC manda una richiesta di una pagina web a un server e la pagina web viene inviata. Si tratta di un utilizzo tipico del modello client-server in una rete.